import{a as si,b as li,d as hi,e as pi,f as mi,g as ui,h as gi}from"./chunk-HBF5AA77.js";import{O as St,Q as ni,U as oi,ba as ci,da as ai,ea as ri,fa as di}from"./chunk-O6CXBG2O.js";import{Aa as yt,Ab as k,Bb as et,Ja as V,Jb as kt,Ka as T,Qa as ti,ba as tt,bb as bt,d as p,da as Xt,e as Ce,eb as wt,f as vt,hb as w,ib as C,ic as ii,jb as Q,ka as j,la as it,qa as _t,qb as Ct,qc as ei,wb as It,xb as xt,yb as Et}from"./chunk-RS4Y4S6U.js";var _i=p((fo,vi)=>{"use strict";vi.exports=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}});var S=p(R=>{"use strict";var Mt,Ee=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];R.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};R.getSymbolTotalCodewords=function(t){return Ee[t]};R.getBCHDigit=function(n){let t=0;for(;n!==0;)t++,n>>>=1;return t};R.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');Mt=t};R.isKanjiModeEnabled=function(){return typeof Mt<"u"};R.toSJIS=function(t){return Mt(t)}});var nt=p(v=>{"use strict";v.L={bit:1};v.M={bit:0};v.Q={bit:3};v.H={bit:2};function ke(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return v.L;case"m":case"medium":return v.M;case"q":case"quartile":return v.Q;case"h":case"high":return v.H;default:throw new Error("Unknown EC Level: "+n)}}v.isValid=function(t){return t&&typeof t.bit<"u"&&t.bit>=0&&t.bit<4};v.from=function(t,i){if(v.isValid(t))return t;try{return ke(t)}catch{return i}}});var wi=p((yo,bi)=>{"use strict";function yi(){this.buffer=[],this.length=0}yi.prototype={get:function(n){let t=Math.floor(n/8);return(this.buffer[t]>>>7-n%8&1)===1},put:function(n,t){for(let i=0;i<t;i++)this.putBit((n>>>t-i-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(n){let t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),n&&(this.buffer[t]|=128>>>this.length%8),this.length++}};bi.exports=yi});var Ii=p((bo,Ci)=>{"use strict";function G(n){if(!n||n<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=n,this.data=new Uint8Array(n*n),this.reservedBit=new Uint8Array(n*n)}G.prototype.set=function(n,t,i,e){let o=n*this.size+t;this.data[o]=i,e&&(this.reservedBit[o]=!0)};G.prototype.get=function(n,t){return this.data[n*this.size+t]};G.prototype.xor=function(n,t,i){this.data[n*this.size+t]^=i};G.prototype.isReserved=function(n,t){return this.reservedBit[n*this.size+t]};Ci.exports=G});var xi=p(ot=>{"use strict";var Se=S().getSymbolSize;ot.getRowColCoords=function(t){if(t===1)return[];let i=Math.floor(t/7)+2,e=Se(t),o=e===145?26:Math.ceil((e-13)/(2*i-2))*2,c=[e-7];for(let a=1;a<i-1;a++)c[a]=c[a-1]-o;return c.push(6),c.reverse()};ot.getPositions=function(t){let i=[],e=ot.getRowColCoords(t),o=e.length;for(let c=0;c<o;c++)for(let a=0;a<o;a++)c===0&&a===0||c===0&&a===o-1||c===o-1&&a===0||i.push([e[c],e[a]]);return i}});var Si=p(ki=>{"use strict";var Me=S().getSymbolSize,Ei=7;ki.getPositions=function(t){let i=Me(t);return[[0,0],[i-Ei,0],[0,i-Ei]]}});var Mi=p(m=>{"use strict";m.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var F={N1:3,N2:3,N3:40,N4:10};m.isValid=function(t){return t!=null&&t!==""&&!isNaN(t)&&t>=0&&t<=7};m.from=function(t){return m.isValid(t)?parseInt(t,10):void 0};m.getPenaltyN1=function(t){let i=t.size,e=0,o=0,c=0,a=null,r=null;for(let d=0;d<i;d++){o=c=0,a=r=null;for(let s=0;s<i;s++){let l=t.get(d,s);l===a?o++:(o>=5&&(e+=F.N1+(o-5)),a=l,o=1),l=t.get(s,d),l===r?c++:(c>=5&&(e+=F.N1+(c-5)),r=l,c=1)}o>=5&&(e+=F.N1+(o-5)),c>=5&&(e+=F.N1+(c-5))}return e};m.getPenaltyN2=function(t){let i=t.size,e=0;for(let o=0;o<i-1;o++)for(let c=0;c<i-1;c++){let a=t.get(o,c)+t.get(o,c+1)+t.get(o+1,c)+t.get(o+1,c+1);(a===4||a===0)&&e++}return e*F.N2};m.getPenaltyN3=function(t){let i=t.size,e=0,o=0,c=0;for(let a=0;a<i;a++){o=c=0;for(let r=0;r<i;r++)o=o<<1&2047|t.get(a,r),r>=10&&(o===1488||o===93)&&e++,c=c<<1&2047|t.get(r,a),r>=10&&(c===1488||c===93)&&e++}return e*F.N3};m.getPenaltyN4=function(t){let i=0,e=t.data.length;for(let c=0;c<e;c++)i+=t.data[c];return Math.abs(Math.ceil(i*100/e/5)-10)*F.N4};function De(n,t,i){switch(n){case m.Patterns.PATTERN000:return(t+i)%2===0;case m.Patterns.PATTERN001:return t%2===0;case m.Patterns.PATTERN010:return i%3===0;case m.Patterns.PATTERN011:return(t+i)%3===0;case m.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(i/3))%2===0;case m.Patterns.PATTERN101:return t*i%2+t*i%3===0;case m.Patterns.PATTERN110:return(t*i%2+t*i%3)%2===0;case m.Patterns.PATTERN111:return(t*i%3+(t+i)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}m.applyMask=function(t,i){let e=i.size;for(let o=0;o<e;o++)for(let c=0;c<e;c++)i.isReserved(c,o)||i.xor(c,o,De(t,c,o))};m.getBestMask=function(t,i){let e=Object.keys(m.Patterns).length,o=0,c=1/0;for(let a=0;a<e;a++){i(a),m.applyMask(a,t);let r=m.getPenaltyN1(t)+m.getPenaltyN2(t)+m.getPenaltyN3(t)+m.getPenaltyN4(t);m.applyMask(a,t),r<c&&(c=r,o=a)}return o}});var At=p(Dt=>{"use strict";var M=nt(),ct=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],at=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Dt.getBlocksCount=function(t,i){switch(i){case M.L:return ct[(t-1)*4+0];case M.M:return ct[(t-1)*4+1];case M.Q:return ct[(t-1)*4+2];case M.H:return ct[(t-1)*4+3];default:return}};Dt.getTotalCodewordsCount=function(t,i){switch(i){case M.L:return at[(t-1)*4+0];case M.M:return at[(t-1)*4+1];case M.Q:return at[(t-1)*4+2];case M.H:return at[(t-1)*4+3];default:return}}});var Di=p(dt=>{"use strict";var K=new Uint8Array(512),rt=new Uint8Array(256);(function(){let t=1;for(let i=0;i<255;i++)K[i]=t,rt[t]=i,t<<=1,t&256&&(t^=285);for(let i=255;i<512;i++)K[i]=K[i-255]})();dt.log=function(t){if(t<1)throw new Error("log("+t+")");return rt[t]};dt.exp=function(t){return K[t]};dt.mul=function(t,i){return t===0||i===0?0:K[rt[t]+rt[i]]}});var Ai=p(J=>{"use strict";var Tt=Di();J.mul=function(t,i){let e=new Uint8Array(t.length+i.length-1);for(let o=0;o<t.length;o++)for(let c=0;c<i.length;c++)e[o+c]^=Tt.mul(t[o],i[c]);return e};J.mod=function(t,i){let e=new Uint8Array(t);for(;e.length-i.length>=0;){let o=e[0];for(let a=0;a<i.length;a++)e[a]^=Tt.mul(i[a],o);let c=0;for(;c<e.length&&e[c]===0;)c++;e=e.slice(c)}return e};J.generateECPolynomial=function(t){let i=new Uint8Array([1]);for(let e=0;e<t;e++)i=J.mul(i,new Uint8Array([1,Tt.exp(e)]));return i}});var Fi=p((So,Ri)=>{"use strict";var Ti=Ai();function Rt(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}Rt.prototype.initialize=function(t){this.degree=t,this.genPoly=Ti.generateECPolynomial(this.degree)};Rt.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");let i=new Uint8Array(t.length+this.degree);i.set(t);let e=Ti.mod(i,this.genPoly),o=this.degree-e.length;if(o>0){let c=new Uint8Array(this.degree);return c.set(e,o),c}return e};Ri.exports=Rt});var Ft=p(Bi=>{"use strict";Bi.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}});var Bt=p(I=>{"use strict";var Li="[0-9]+",Ae="[A-Z $%*+\\-./:]+",Y="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Y=Y.replace(/u/g,"\\u");var Te="(?:(?![A-Z0-9 $%*+\\-./:]|"+Y+`)(?:.|[\r
]))+`;I.KANJI=new RegExp(Y,"g");I.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");I.BYTE=new RegExp(Te,"g");I.NUMERIC=new RegExp(Li,"g");I.ALPHANUMERIC=new RegExp(Ae,"g");var Re=new RegExp("^"+Y+"$"),Fe=new RegExp("^"+Li+"$"),Be=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");I.testKanji=function(t){return Re.test(t)};I.testNumeric=function(t){return Fe.test(t)};I.testAlphanumeric=function(t){return Be.test(t)}});var D=p(g=>{"use strict";var Le=Ft(),Lt=Bt();g.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]};g.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]};g.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]};g.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]};g.MIXED={bit:-1};g.getCharCountIndicator=function(t,i){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!Le.isValid(i))throw new Error("Invalid version: "+i);return i>=1&&i<10?t.ccBits[0]:i<27?t.ccBits[1]:t.ccBits[2]};g.getBestModeForData=function(t){return Lt.testNumeric(t)?g.NUMERIC:Lt.testAlphanumeric(t)?g.ALPHANUMERIC:Lt.testKanji(t)?g.KANJI:g.BYTE};g.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")};g.isValid=function(t){return t&&t.bit&&t.ccBits};function Pe(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"numeric":return g.NUMERIC;case"alphanumeric":return g.ALPHANUMERIC;case"kanji":return g.KANJI;case"byte":return g.BYTE;default:throw new Error("Unknown mode: "+n)}}g.from=function(t,i){if(g.isValid(t))return t;try{return Pe(t)}catch{return i}}});var Hi=p(B=>{"use strict";var st=S(),Ne=At(),Pi=nt(),A=D(),Pt=Ft(),qi=7973,Ni=st.getBCHDigit(qi);function qe(n,t,i){for(let e=1;e<=40;e++)if(t<=B.getCapacity(e,i,n))return e}function zi(n,t){return A.getCharCountIndicator(n,t)+4}function ze(n,t){let i=0;return n.forEach(function(e){let o=zi(e.mode,t);i+=o+e.getBitsLength()}),i}function He(n,t){for(let i=1;i<=40;i++)if(ze(n,i)<=B.getCapacity(i,t,A.MIXED))return i}B.from=function(t,i){return Pt.isValid(t)?parseInt(t,10):i};B.getCapacity=function(t,i,e){if(!Pt.isValid(t))throw new Error("Invalid QR Code version");typeof e>"u"&&(e=A.BYTE);let o=st.getSymbolTotalCodewords(t),c=Ne.getTotalCodewordsCount(t,i),a=(o-c)*8;if(e===A.MIXED)return a;let r=a-zi(e,t);switch(e){case A.NUMERIC:return Math.floor(r/10*3);case A.ALPHANUMERIC:return Math.floor(r/11*2);case A.KANJI:return Math.floor(r/13);case A.BYTE:default:return Math.floor(r/8)}};B.getBestVersionForData=function(t,i){let e,o=Pi.from(i,Pi.M);if(Array.isArray(t)){if(t.length>1)return He(t,o);if(t.length===0)return 1;e=t[0]}else e=t;return qe(e.mode,e.getLength(),o)};B.getEncodedBits=function(t){if(!Pt.isValid(t)||t<7)throw new Error("Invalid QR Code version");let i=t<<12;for(;st.getBCHDigit(i)-Ni>=0;)i^=qi<<st.getBCHDigit(i)-Ni;return t<<12|i}});var Vi=p(ji=>{"use strict";var Nt=S(),Oi=1335,Ue=21522,Ui=Nt.getBCHDigit(Oi);ji.getEncodedBits=function(t,i){let e=t.bit<<3|i,o=e<<10;for(;Nt.getBCHDigit(o)-Ui>=0;)o^=Oi<<Nt.getBCHDigit(o)-Ui;return(e<<10|o)^Ue}});var Gi=p((Fo,Qi)=>{"use strict";var Oe=D();function N(n){this.mode=Oe.NUMERIC,this.data=n.toString()}N.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};N.prototype.getLength=function(){return this.data.length};N.prototype.getBitsLength=function(){return N.getBitsLength(this.data.length)};N.prototype.write=function(t){let i,e,o;for(i=0;i+3<=this.data.length;i+=3)e=this.data.substr(i,3),o=parseInt(e,10),t.put(o,10);let c=this.data.length-i;c>0&&(e=this.data.substr(i),o=parseInt(e,10),t.put(o,c*3+1))};Qi.exports=N});var Ji=p((Bo,Ki)=>{"use strict";var je=D(),qt=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function q(n){this.mode=je.ALPHANUMERIC,this.data=n}q.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};q.prototype.getLength=function(){return this.data.length};q.prototype.getBitsLength=function(){return q.getBitsLength(this.data.length)};q.prototype.write=function(t){let i;for(i=0;i+2<=this.data.length;i+=2){let e=qt.indexOf(this.data[i])*45;e+=qt.indexOf(this.data[i+1]),t.put(e,11)}this.data.length%2&&t.put(qt.indexOf(this.data[i]),6)};Ki.exports=q});var Wi=p((Lo,Yi)=>{"use strict";Yi.exports=function(t){for(var i=[],e=t.length,o=0;o<e;o++){var c=t.charCodeAt(o);if(c>=55296&&c<=56319&&e>o+1){var a=t.charCodeAt(o+1);a>=56320&&a<=57343&&(c=(c-55296)*1024+a-56320+65536,o+=1)}if(c<128){i.push(c);continue}if(c<2048){i.push(c>>6|192),i.push(c&63|128);continue}if(c<55296||c>=57344&&c<65536){i.push(c>>12|224),i.push(c>>6&63|128),i.push(c&63|128);continue}if(c>=65536&&c<=1114111){i.push(c>>18|240),i.push(c>>12&63|128),i.push(c>>6&63|128),i.push(c&63|128);continue}i.push(239,191,189)}return new Uint8Array(i).buffer}});var Zi=p((Po,$i)=>{"use strict";var Ve=Wi(),Qe=D();function z(n){this.mode=Qe.BYTE,typeof n=="string"&&(n=Ve(n)),this.data=new Uint8Array(n)}z.getBitsLength=function(t){return t*8};z.prototype.getLength=function(){return this.data.length};z.prototype.getBitsLength=function(){return z.getBitsLength(this.data.length)};z.prototype.write=function(n){for(let t=0,i=this.data.length;t<i;t++)n.put(this.data[t],8)};$i.exports=z});var te=p((No,Xi)=>{"use strict";var Ge=D(),Ke=S();function H(n){this.mode=Ge.KANJI,this.data=n}H.getBitsLength=function(t){return t*13};H.prototype.getLength=function(){return this.data.length};H.prototype.getBitsLength=function(){return H.getBitsLength(this.data.length)};H.prototype.write=function(n){let t;for(t=0;t<this.data.length;t++){let i=Ke.toSJIS(this.data[t]);if(i>=33088&&i<=40956)i-=33088;else if(i>=57408&&i<=60351)i-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);i=(i>>>8&255)*192+(i&255),n.put(i,13)}};Xi.exports=H});var ie=p((qo,zt)=>{"use strict";var W={single_source_shortest_paths:function(n,t,i){var e={},o={};o[t]=0;var c=W.PriorityQueue.make();c.push(t,0);for(var a,r,d,s,l,f,u,_,x;!c.empty();){a=c.pop(),r=a.value,s=a.cost,l=n[r]||{};for(d in l)l.hasOwnProperty(d)&&(f=l[d],u=s+f,_=o[d],x=typeof o[d]>"u",(x||_>u)&&(o[d]=u,c.push(d,u),e[d]=r))}if(typeof i<"u"&&typeof o[i]>"u"){var E=["Could not find a path from ",t," to ",i,"."].join("");throw new Error(E)}return e},extract_shortest_path_from_predecessor_list:function(n,t){for(var i=[],e=t,o;e;)i.push(e),o=n[e],e=n[e];return i.reverse(),i},find_path:function(n,t,i){var e=W.single_source_shortest_paths(n,t,i);return W.extract_shortest_path_from_predecessor_list(e,i)},PriorityQueue:{make:function(n){var t=W.PriorityQueue,i={},e;n=n||{};for(e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i.queue=[],i.sorter=n.sorter||t.default_sorter,i},default_sorter:function(n,t){return n.cost-t.cost},push:function(n,t){var i={value:n,cost:t};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};typeof zt<"u"&&(zt.exports=W)});var se=p(U=>{"use strict";var h=D(),oe=Gi(),ce=Ji(),ae=Zi(),re=te(),$=Bt(),lt=S(),Je=ie();function ee(n){return unescape(encodeURIComponent(n)).length}function Z(n,t,i){let e=[],o;for(;(o=n.exec(i))!==null;)e.push({data:o[0],index:o.index,mode:t,length:o[0].length});return e}function de(n){let t=Z($.NUMERIC,h.NUMERIC,n),i=Z($.ALPHANUMERIC,h.ALPHANUMERIC,n),e,o;return lt.isKanjiModeEnabled()?(e=Z($.BYTE,h.BYTE,n),o=Z($.KANJI,h.KANJI,n)):(e=Z($.BYTE_KANJI,h.BYTE,n),o=[]),t.concat(i,e,o).sort(function(a,r){return a.index-r.index}).map(function(a){return{data:a.data,mode:a.mode,length:a.length}})}function Ht(n,t){switch(t){case h.NUMERIC:return oe.getBitsLength(n);case h.ALPHANUMERIC:return ce.getBitsLength(n);case h.KANJI:return re.getBitsLength(n);case h.BYTE:return ae.getBitsLength(n)}}function Ye(n){return n.reduce(function(t,i){let e=t.length-1>=0?t[t.length-1]:null;return e&&e.mode===i.mode?(t[t.length-1].data+=i.data,t):(t.push(i),t)},[])}function We(n){let t=[];for(let i=0;i<n.length;i++){let e=n[i];switch(e.mode){case h.NUMERIC:t.push([e,{data:e.data,mode:h.ALPHANUMERIC,length:e.length},{data:e.data,mode:h.BYTE,length:e.length}]);break;case h.ALPHANUMERIC:t.push([e,{data:e.data,mode:h.BYTE,length:e.length}]);break;case h.KANJI:t.push([e,{data:e.data,mode:h.BYTE,length:ee(e.data)}]);break;case h.BYTE:t.push([{data:e.data,mode:h.BYTE,length:ee(e.data)}])}}return t}function $e(n,t){let i={},e={start:{}},o=["start"];for(let c=0;c<n.length;c++){let a=n[c],r=[];for(let d=0;d<a.length;d++){let s=a[d],l=""+c+d;r.push(l),i[l]={node:s,lastCount:0},e[l]={};for(let f=0;f<o.length;f++){let u=o[f];i[u]&&i[u].node.mode===s.mode?(e[u][l]=Ht(i[u].lastCount+s.length,s.mode)-Ht(i[u].lastCount,s.mode),i[u].lastCount+=s.length):(i[u]&&(i[u].lastCount=s.length),e[u][l]=Ht(s.length,s.mode)+4+h.getCharCountIndicator(s.mode,t))}}o=r}for(let c=0;c<o.length;c++)e[o[c]].end=0;return{map:e,table:i}}function ne(n,t){let i,e=h.getBestModeForData(n);if(i=h.from(t,e),i!==h.BYTE&&i.bit<e.bit)throw new Error('"'+n+'" cannot be encoded with mode '+h.toString(i)+`.
 Suggested mode is: `+h.toString(e));switch(i===h.KANJI&&!lt.isKanjiModeEnabled()&&(i=h.BYTE),i){case h.NUMERIC:return new oe(n);case h.ALPHANUMERIC:return new ce(n);case h.KANJI:return new re(n);case h.BYTE:return new ae(n)}}U.fromArray=function(t){return t.reduce(function(i,e){return typeof e=="string"?i.push(ne(e,null)):e.data&&i.push(ne(e.data,e.mode)),i},[])};U.fromString=function(t,i){let e=de(t,lt.isKanjiModeEnabled()),o=We(e),c=$e(o,i),a=Je.find_path(c.map,"start","end"),r=[];for(let d=1;d<a.length-1;d++)r.push(c.table[a[d]].node);return U.fromArray(Ye(r))};U.rawSplit=function(t){return U.fromArray(de(t,lt.isKanjiModeEnabled()))}});var he=p(le=>{"use strict";var pt=S(),Ut=nt(),Ze=wi(),Xe=Ii(),tn=xi(),en=Si(),Vt=Mi(),Qt=At(),nn=Fi(),ht=Hi(),on=Vi(),cn=D(),Ot=se();function an(n,t){let i=n.size,e=en.getPositions(t);for(let o=0;o<e.length;o++){let c=e[o][0],a=e[o][1];for(let r=-1;r<=7;r++)if(!(c+r<=-1||i<=c+r))for(let d=-1;d<=7;d++)a+d<=-1||i<=a+d||(r>=0&&r<=6&&(d===0||d===6)||d>=0&&d<=6&&(r===0||r===6)||r>=2&&r<=4&&d>=2&&d<=4?n.set(c+r,a+d,!0,!0):n.set(c+r,a+d,!1,!0))}}function rn(n){let t=n.size;for(let i=8;i<t-8;i++){let e=i%2===0;n.set(i,6,e,!0),n.set(6,i,e,!0)}}function dn(n,t){let i=tn.getPositions(t);for(let e=0;e<i.length;e++){let o=i[e][0],c=i[e][1];for(let a=-2;a<=2;a++)for(let r=-2;r<=2;r++)a===-2||a===2||r===-2||r===2||a===0&&r===0?n.set(o+a,c+r,!0,!0):n.set(o+a,c+r,!1,!0)}}function sn(n,t){let i=n.size,e=ht.getEncodedBits(t),o,c,a;for(let r=0;r<18;r++)o=Math.floor(r/3),c=r%3+i-8-3,a=(e>>r&1)===1,n.set(o,c,a,!0),n.set(c,o,a,!0)}function jt(n,t,i){let e=n.size,o=on.getEncodedBits(t,i),c,a;for(c=0;c<15;c++)a=(o>>c&1)===1,c<6?n.set(c,8,a,!0):c<8?n.set(c+1,8,a,!0):n.set(e-15+c,8,a,!0),c<8?n.set(8,e-c-1,a,!0):c<9?n.set(8,15-c-1+1,a,!0):n.set(8,15-c-1,a,!0);n.set(e-8,8,1,!0)}function ln(n,t){let i=n.size,e=-1,o=i-1,c=7,a=0;for(let r=i-1;r>0;r-=2)for(r===6&&r--;;){for(let d=0;d<2;d++)if(!n.isReserved(o,r-d)){let s=!1;a<t.length&&(s=(t[a]>>>c&1)===1),n.set(o,r-d,s),c--,c===-1&&(a++,c=7)}if(o+=e,o<0||i<=o){o-=e,e=-e;break}}}function hn(n,t,i){let e=new Ze;i.forEach(function(d){e.put(d.mode.bit,4),e.put(d.getLength(),cn.getCharCountIndicator(d.mode,n)),d.write(e)});let o=pt.getSymbolTotalCodewords(n),c=Qt.getTotalCodewordsCount(n,t),a=(o-c)*8;for(e.getLengthInBits()+4<=a&&e.put(0,4);e.getLengthInBits()%8!==0;)e.putBit(0);let r=(a-e.getLengthInBits())/8;for(let d=0;d<r;d++)e.put(d%2?17:236,8);return pn(e,n,t)}function pn(n,t,i){let e=pt.getSymbolTotalCodewords(t),o=Qt.getTotalCodewordsCount(t,i),c=e-o,a=Qt.getBlocksCount(t,i),r=e%a,d=a-r,s=Math.floor(e/a),l=Math.floor(c/a),f=l+1,u=s-l,_=new nn(u),x=0,E=new Array(a),$t=new Array(a),ut=0,we=new Uint8Array(n.buffer);for(let P=0;P<a;P++){let ft=P<d?l:f;E[P]=we.slice(x,x+ft),$t[P]=_.encode(E[P]),x+=ft,ut=Math.max(ut,ft)}let gt=new Uint8Array(e),Zt=0,y,b;for(y=0;y<ut;y++)for(b=0;b<a;b++)y<E[b].length&&(gt[Zt++]=E[b][y]);for(y=0;y<u;y++)for(b=0;b<a;b++)gt[Zt++]=$t[b][y];return gt}function mn(n,t,i,e){let o;if(Array.isArray(n))o=Ot.fromArray(n);else if(typeof n=="string"){let s=t;if(!s){let l=Ot.rawSplit(n);s=ht.getBestVersionForData(l,i)}o=Ot.fromString(n,s||40)}else throw new Error("Invalid data");let c=ht.getBestVersionForData(o,i);if(!c)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=c;else if(t<c)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+c+`.
`);let a=hn(t,i,o),r=pt.getSymbolSize(t),d=new Xe(r);return an(d,t),rn(d),dn(d,t),jt(d,i,0),t>=7&&sn(d,t),ln(d,a),isNaN(e)&&(e=Vt.getBestMask(d,jt.bind(null,d,i))),Vt.applyMask(e,d),jt(d,i,e),{modules:d,version:t,errorCorrectionLevel:i,maskPattern:e,segments:o}}le.create=function(t,i){if(typeof t>"u"||t==="")throw new Error("No input text");let e=Ut.M,o,c;return typeof i<"u"&&(e=Ut.from(i.errorCorrectionLevel,Ut.M),o=ht.from(i.version),c=Vt.from(i.maskPattern),i.toSJISFunc&&pt.setToSJISFunction(i.toSJISFunc)),mn(t,o,e,c)}});var Gt=p(L=>{"use strict";function pe(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let t=n.slice().replace("#","").split("");if(t.length<3||t.length===5||t.length>8)throw new Error("Invalid hex color: "+n);(t.length===3||t.length===4)&&(t=Array.prototype.concat.apply([],t.map(function(e){return[e,e]}))),t.length===6&&t.push("F","F");let i=parseInt(t.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+t.slice(0,6).join("")}}L.getOptions=function(t){t||(t={}),t.color||(t.color={});let i=typeof t.margin>"u"||t.margin===null||t.margin<0?4:t.margin,e=t.width&&t.width>=21?t.width:void 0,o=t.scale||4;return{width:e,scale:e?4:o,margin:i,color:{dark:pe(t.color.dark||"#000000ff"),light:pe(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}};L.getScale=function(t,i){return i.width&&i.width>=t+i.margin*2?i.width/(t+i.margin*2):i.scale};L.getImageWidth=function(t,i){let e=L.getScale(t,i);return Math.floor((t+i.margin*2)*e)};L.qrToImageData=function(t,i,e){let o=i.modules.size,c=i.modules.data,a=L.getScale(o,e),r=Math.floor((o+e.margin*2)*a),d=e.margin*a,s=[e.color.light,e.color.dark];for(let l=0;l<r;l++)for(let f=0;f<r;f++){let u=(l*r+f)*4,_=e.color.light;if(l>=d&&f>=d&&l<r-d&&f<r-d){let x=Math.floor((l-d)/a),E=Math.floor((f-d)/a);_=s[c[x*o+E]?1:0]}t[u++]=_.r,t[u++]=_.g,t[u++]=_.b,t[u]=_.a}}});var me=p(mt=>{"use strict";var Kt=Gt();function un(n,t,i){n.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=i,t.width=i,t.style.height=i+"px",t.style.width=i+"px"}function gn(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}mt.render=function(t,i,e){let o=e,c=i;typeof o>"u"&&(!i||!i.getContext)&&(o=i,i=void 0),i||(c=gn()),o=Kt.getOptions(o);let a=Kt.getImageWidth(t.modules.size,o),r=c.getContext("2d"),d=r.createImageData(a,a);return Kt.qrToImageData(d.data,t,o),un(r,c,a),r.putImageData(d,0,0),c};mt.renderToDataURL=function(t,i,e){let o=e;typeof o>"u"&&(!i||!i.getContext)&&(o=i,i=void 0),o||(o={});let c=mt.render(t,i,o),a=o.type||"image/png",r=o.rendererOpts||{};return c.toDataURL(a,r.quality)}});var fe=p(ge=>{"use strict";var fn=Gt();function ue(n,t){let i=n.a/255,e=t+'="'+n.hex+'"';return i<1?e+" "+t+'-opacity="'+i.toFixed(2).slice(1)+'"':e}function Jt(n,t,i){let e=n+t;return typeof i<"u"&&(e+=" "+i),e}function vn(n,t,i){let e="",o=0,c=!1,a=0;for(let r=0;r<n.length;r++){let d=Math.floor(r%t),s=Math.floor(r/t);!d&&!c&&(c=!0),n[r]?(a++,r>0&&d>0&&n[r-1]||(e+=c?Jt("M",d+i,.5+s+i):Jt("m",o,0),o=0,c=!1),d+1<t&&n[r+1]||(e+=Jt("h",a),a=0)):o++}return e}ge.render=function(t,i,e){let o=fn.getOptions(i),c=t.modules.size,a=t.modules.data,r=c+o.margin*2,d=o.color.light.a?"<path "+ue(o.color.light,"fill")+' d="M0 0h'+r+"v"+r+'H0z"/>':"",s="<path "+ue(o.color.dark,"stroke")+' d="'+vn(a,c,o.margin)+'"/>',l='viewBox="0 0 '+r+" "+r+'"',u='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+l+' shape-rendering="crispEdges">'+d+s+`</svg>
`;return typeof e=="function"&&e(null,u),u}});var _e=p(X=>{"use strict";var _n=_i(),Yt=he(),ve=me(),yn=fe();function Wt(n,t,i,e,o){let c=[].slice.call(arguments,1),a=c.length,r=typeof c[a-1]=="function";if(!r&&!_n())throw new Error("Callback required as last argument");if(r){if(a<2)throw new Error("Too few arguments provided");a===2?(o=i,i=t,t=e=void 0):a===3&&(t.getContext&&typeof o>"u"?(o=e,e=void 0):(o=e,e=i,i=t,t=void 0))}else{if(a<1)throw new Error("Too few arguments provided");return a===1?(i=t,t=e=void 0):a===2&&!t.getContext&&(e=i,i=t,t=void 0),new Promise(function(d,s){try{let l=Yt.create(i,e);d(n(l,t,e))}catch(l){s(l)}})}try{let d=Yt.create(i,e);o(null,n(d,t,e))}catch(d){o(d)}}X.create=Yt.create;X.toCanvas=Wt.bind(null,ve.render);X.toDataURL=Wt.bind(null,ve.renderToDataURL);X.toString=Wt.bind(null,function(n,t,i){return yn.render(n,i)})});var xe=new Xt("mat-chips-default-options",{providedIn:"root",factory:()=>({separatorKeyCodes:[13]})});var uo=(()=>{class n{static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({providers:[ni,{provide:xe,useValue:{separatorKeyCodes:[13]}}],imports:[St,oi,St]})}}return n})();var O=Ce(_e(),1);var bn=["qrcElement"],ye=(()=>{class n{constructor(i,e){this.renderer=i,this.sanitizer=e,this.allowEmptyString=!1,this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.qrdata="",this.scale=4,this.width=10,this.qrCodeURL=new yt,this.context=null}ngOnChanges(){return vt(this,null,function*(){yield this.createQRCode()})}isValidQrCodeText(i){return this.allowEmptyString===!1?!(typeof i>"u"||i===""||i==="null"||i===null):!(typeof i>"u")}toDataURL(i){return new Promise((e,o)=>{(0,O.toDataURL)(this.qrdata,i,(c,a)=>{c?o(c):e(a)})})}toCanvas(i,e){return new Promise((o,c)=>{(0,O.toCanvas)(i,this.qrdata,e,a=>{a?c(a):o("success")})})}toSVG(i){return new Promise((e,o)=>{(0,O.toString)(this.qrdata,i,(c,a)=>{c?o(c):e(a)})})}renderElement(i){for(let e of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,e);this.renderer.appendChild(this.qrcElement.nativeElement,i)}createQRCode(){return vt(this,null,function*(){this.version&&this.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),this.version=40):this.version&&this.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),this.version=1):this.version!==void 0&&isNaN(this.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),this.version=void 0);try{if(!this.isValidQrCodeText(this.qrdata))throw new Error("[angularx-qrcode] Field `qrdata` is empty, set 'allowEmptyString=\"true\"' to overwrite this behaviour.");this.isValidQrCodeText(this.qrdata)&&this.qrdata===""&&(this.qrdata=" ");let i={color:{dark:this.colorDark,light:this.colorLight},errorCorrectionLevel:this.errorCorrectionLevel,margin:this.margin,scale:this.scale,version:this.version,width:this.width},e=this.imageSrc,o=this.imageHeight||40,c=this.imageWidth||40;switch(this.elementType){case"canvas":{let a=this.renderer.createElement("canvas");this.context=a.getContext("2d"),this.toCanvas(a,i).then(()=>{if(this.ariaLabel&&this.renderer.setAttribute(a,"aria-label",`${this.ariaLabel}`),this.title&&this.renderer.setAttribute(a,"title",`${this.title}`),e&&this.context){this.centerImage=new Image(c,o),e!==this.centerImage.src&&(this.centerImage.src=e),o!==this.centerImage.height&&(this.centerImage.height=o),c!==this.centerImage.width&&(this.centerImage.width=c);let r=this.centerImage;r&&(r.onload=()=>{this.context?.drawImage(r,a.width/2-c/2,a.height/2-o/2,c,o)})}this.renderElement(a),this.emitQRCodeURL(a)}).catch(r=>{console.error("[angularx-qrcode] canvas error:",r)});break}case"svg":{let a=this.renderer.createElement("div");this.toSVG(i).then(r=>{this.renderer.setProperty(a,"innerHTML",r);let d=a.firstChild;this.renderer.setAttribute(d,"height",`${this.width}`),this.renderer.setAttribute(d,"width",`${this.width}`),this.renderElement(d),this.emitQRCodeURL(d)}).catch(r=>{console.error("[angularx-qrcode] svg error:",r)});break}case"url":case"img":default:{let a=this.renderer.createElement("img");this.toDataURL(i).then(r=>{this.alt&&a.setAttribute("alt",this.alt),this.ariaLabel&&a.setAttribute("aria-label",this.ariaLabel),a.setAttribute("src",r),this.title&&a.setAttribute("title",this.title),this.renderElement(a),this.emitQRCodeURL(a)}).catch(r=>{console.error("[angularx-qrcode] img/url error:",r)})}}}catch(i){console.error("[angularx-qrcode] Error generating QR Code:",i.message)}})}emitQRCodeURL(i){let e=i.constructor.name;if(e===SVGSVGElement.name){let c=i.outerHTML,a=new Blob([c],{type:"image/svg+xml"}),r=URL.createObjectURL(a),d=this.sanitizer.bypassSecurityTrustUrl(r);this.qrCodeURL.emit(d);return}let o="";e===HTMLCanvasElement.name&&(o=i.toDataURL("image/png")),e===HTMLImageElement.name&&(o=i.src),fetch(o).then(c=>c.blob()).then(c=>URL.createObjectURL(c)).then(c=>this.sanitizer.bypassSecurityTrustUrl(c)).then(c=>{this.qrCodeURL.emit(c)}).catch(c=>{console.error("[angularx-qrcode] Error when fetching image/png URL: "+c)})}static{this.\u0275fac=function(e){return new(e||n)(T(ti),T(ei))}}static{this.\u0275cmp=j({type:n,selectors:[["qrcode"]],viewQuery:function(e,o){if(e&1&&It(bn,7),e&2){let c;xt(c=Et())&&(o.qrcElement=c.first)}},inputs:{allowEmptyString:"allowEmptyString",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",margin:"margin",qrdata:"qrdata",scale:"scale",version:"version",width:"width",alt:"alt",ariaLabel:"ariaLabel",title:"title"},outputs:{qrCodeURL:"qrCodeURL"},features:[_t],decls:2,vars:2,consts:[["qrcElement",""]],template:function(e,o){e&1&&Q(0,"div",null,0),e&2&&wt(o.cssClass)},encapsulation:2,changeDetection:0})}}return n})(),be=(()=>{class n{static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=tt({})}}return n})();var dc=(()=>{class n{constructor(i,e){this.dialogRef=i,this.data=e;let o=window.location.origin;this.qrUrl=`${o}/device/${e.deviceId}`}copyUrl(){navigator.clipboard.writeText(this.qrUrl).then(()=>{alert("\u9023\u7D50\u5DF2\u8907\u88FD\uFF01")})}static{this.\u0275fac=function(e){return new(e||n)(T(si),T(li))}}static{this.\u0275cmp=j({type:n,selectors:[["app-qr-dialog"]],standalone:!0,features:[kt],decls:16,vars:6,consts:[["mat-dialog-title",""],[1,"qr-container"],[3,"qrdata","width","errorCorrectionLevel","margin"],[1,"hint"],[1,"url"],["align","end"],["mat-button","",3,"click"],["mat-button","","mat-dialog-close",""]],template:function(e,o){e&1&&(w(0,"h2",0),k(1),C(),w(2,"mat-dialog-content")(3,"div",1),Q(4,"qrcode",2),C(),w(5,"p",3),k(6,"\u6383\u63CF\u6B64 QR Code \u5373\u53EF\u501F\u7528\u6216\u6B78\u9084\u8A2D\u5099"),C(),w(7,"p",4),k(8),C()(),w(9,"mat-dialog-actions",5)(10,"button",6),Ct("click",function(){return o.copyUrl()}),w(11,"mat-icon"),k(12,"content_copy"),C(),k(13," \u8907\u88FD\u9023\u7D50 "),C(),w(14,"button",7),k(15,"\u95DC\u9589"),C()()),e&2&&(V(),et(o.data.deviceName),V(3),bt("qrdata",o.qrUrl)("width",256)("errorCorrectionLevel","M")("margin",2),V(4),et(o.qrUrl))},dependencies:[ii,gi,hi,pi,ui,mi,ai,ci,di,ri,be,ye],styles:[".qr-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:16px;background:var(--app-surface-elev);border-radius:3px}.hint[_ngcontent-%COMP%]{text-align:center;color:var(--app-text-muted);font-size:14px;margin:16px 0 8px}.url[_ngcontent-%COMP%]{text-align:center;font-size:12px;color:var(--app-text-muted);word-break:break-all;margin:0}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:4px}"]})}}return n})();export{uo as a,dc as b};
