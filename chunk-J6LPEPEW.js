import{a as j,b as S,h as A}from"./chunk-HBF5AA77.js";import{ca as O,da as P,ea as k,fa as D}from"./chunk-O6CXBG2O.js";import{$a as h,Ab as l,Bb as M,Ec as y,Ha as b,Ja as r,Jb as w,Ka as p,aa as g,bb as s,f as a,fa as u,gc as C,hb as n,ib as c,ic as I,jb as x,ka as f,qb as _,sb as v}from"./chunk-RS4Y4S6U.js";function z(o,B){if(o&1&&(n(0,"div",4),l(1),c()),o&2){let e=v();r(),M(e.data.title)}}var J=(()=>{class o{constructor(e,t){this.dialogRef=e,this.data=t}close(){this.dialogRef.close()}static{this.\u0275fac=function(t){return new(t||o)(p(j),p(S))}}static{this.\u0275cmp=f({type:o,selectors:[["app-image-lightbox"]],standalone:!0,features:[w],decls:6,vars:3,consts:[["mat-icon-button","",1,"close-btn",3,"click"],[1,"lightbox"],[3,"src","alt"],["class","caption",4,"ngIf"],[1,"caption"]],template:function(t,i){t&1&&(n(0,"button",0),_("click",function(){return i.close()}),n(1,"mat-icon"),l(2,"close"),c()(),n(3,"div",1),x(4,"img",2),h(5,z,2,1,"div",3),c()),t&2&&(r(4),s("src",i.data.imageUrl,b)("alt",i.data.title||"image"),r(),s("ngIf",i.data.title))},dependencies:[I,C,A,P,O,D,k],styles:["[_nghost-%COMP%]{display:block;position:relative;overflow:hidden}.close-btn[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;width:32px;height:32px;min-width:32px;border-radius:3px;background:var(--app-surface);color:var(--app-text);border:1px solid var(--app-border);display:inline-flex;align-items:center;justify-content:center;padding:0;z-index:1}.close-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.close-btn[_ngcontent-%COMP%]:hover{background:var(--app-surface-elev)}[_nghost-%COMP%]     .close-btn .mat-mdc-button-persistent-ripple, [_nghost-%COMP%]     .close-btn .mdc-icon-button__ripple, [_nghost-%COMP%]     .close-btn .mat-mdc-focus-indicator{opacity:0!important;background:transparent!important}.lightbox[_ngcontent-%COMP%]{padding:48px 16px 16px;text-align:center}img[_ngcontent-%COMP%]{max-width:100%;max-height:75vh;width:auto;height:auto;border-radius:3px;background:var(--app-surface-elev);display:block;margin:0 auto}.caption[_ngcontent-%COMP%]{margin-top:12px;color:var(--app-text-muted);font-size:14px}@media (max-width: 600px){.lightbox[_ngcontent-%COMP%]{padding:44px 12px 12px}.close-btn[_ngcontent-%COMP%]{top:6px;right:6px}}"]})}}return o})();var V=(()=>{class o{constructor(e){this.supabase=e}borrowDevice(e,t,i,d){return a(this,null,function*(){let{data:L,error:m}=yield this.supabase.client.rpc("borrow_device",{p_device_id:e,p_borrower_name:t,p_borrower_email:i||null,p_purpose:d||null});if(m)throw m;return L})}returnDevice(e){return a(this,null,function*(){let{data:t,error:i}=yield this.supabase.client.rpc("return_device",{p_borrow_id:e});if(i)throw i;return t})}getAllBorrows(){return a(this,null,function*(){let{data:e,error:t}=yield this.supabase.client.from("borrows").select("*").order("created_at",{ascending:!1});if(t)throw t;return e})}static{this.\u0275fac=function(t){return new(t||o)(u(y))}}static{this.\u0275prov=g({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();export{J as a,V as b};
