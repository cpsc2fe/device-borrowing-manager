import{a as j,b as S,h as A}from"./chunk-HBF5AA77.js";import{ca as O,da as P,ea as k,fa as D}from"./chunk-O6CXBG2O.js";import{$a as h,Ab as l,Bb as M,Ec as y,Ha as b,Ja as a,Jb as w,Ka as s,aa as u,bb as p,f as n,fa as g,gc as C,hb as r,ib as c,ic as I,jb as v,ka as f,qb as _,sb as x}from"./chunk-RS4Y4S6U.js";function z(o,B){if(o&1&&(r(0,"div",4),l(1),c()),o&2){let e=x();a(),M(e.data.title)}}var J=(()=>{class o{constructor(e,t){this.dialogRef=e,this.data=t}close(){this.dialogRef.close()}static{this.\u0275fac=function(t){return new(t||o)(s(j),s(S))}}static{this.\u0275cmp=f({type:o,selectors:[["app-image-lightbox"]],standalone:!0,features:[w],decls:6,vars:3,consts:[[1,"lightbox"],["mat-icon-button","",1,"close-btn",3,"click"],[3,"src","alt"],["class","caption",4,"ngIf"],[1,"caption"]],template:function(t,i){t&1&&(r(0,"div",0)(1,"button",1),_("click",function(){return i.close()}),r(2,"mat-icon"),l(3,"close"),c()(),v(4,"img",2),h(5,z,2,1,"div",3),c()),t&2&&(a(4),p("src",i.data.imageUrl,b)("alt",i.data.title||"image"),a(),p("ngIf",i.data.title))},dependencies:[I,C,A,P,O,D,k],styles:[".lightbox[_ngcontent-%COMP%]{position:relative;padding:16px;text-align:center}.close-btn[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;width:36px;height:36px;border-radius:0;background:var(--app-surface);color:var(--app-text);border:1px solid var(--app-border);display:inline-flex;align-items:center;justify-content:center;padding:0}.close-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.close-btn[_ngcontent-%COMP%]:hover{background:var(--app-surface-elev)}[_nghost-%COMP%]     .close-btn .mat-mdc-button-persistent-ripple, [_nghost-%COMP%]     .close-btn .mdc-icon-button__ripple, [_nghost-%COMP%]     .close-btn .mat-mdc-focus-indicator{opacity:0!important;background:transparent!important}img[_ngcontent-%COMP%]{max-width:min(90vw,960px);max-height:80vh;width:auto;height:auto;border-radius:3px;background:var(--app-surface-elev);display:block;margin:0 auto}.caption[_ngcontent-%COMP%]{margin-top:12px;color:var(--app-text-muted);font-size:14px}"]})}}return o})();var V=(()=>{class o{constructor(e){this.supabase=e}borrowDevice(e,t,i,m){return n(this,null,function*(){let{data:L,error:d}=yield this.supabase.client.rpc("borrow_device",{p_device_id:e,p_borrower_name:t,p_borrower_email:i||null,p_purpose:m||null});if(d)throw d;return L})}returnDevice(e){return n(this,null,function*(){let{data:t,error:i}=yield this.supabase.client.rpc("return_device",{p_borrow_id:e});if(i)throw i;return t})}getAllBorrows(){return n(this,null,function*(){let{data:e,error:t}=yield this.supabase.client.from("borrows").select("*").order("created_at",{ascending:!1});if(t)throw t;return e})}static{this.\u0275fac=function(t){return new(t||o)(g(y))}}static{this.\u0275prov=u({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();export{J as a,V as b};
